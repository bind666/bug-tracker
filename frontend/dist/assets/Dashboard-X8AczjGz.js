import{u as k,r as a,j as e,V as r}from"./index-BZj9_HIL.js";import{f as M,u as S,d as _,a as D,r as A,c as F}from"./projectService-6xLAzjAb.js";const R=()=>{const{user:o}=k(),[c,g]=a.useState([]),[x,p]=a.useState(null),[l,u]=a.useState({title:"",description:""}),[b,i]=a.useState(null),[f,y]=a.useState({}),[v,w]=a.useState({}),h=async()=>{if(o)try{const t=await M();g(t.data.data)}catch{console.log("Failed to fetch projects")}};a.useEffect(()=>{o&&h()},[o]);const j=t=>{p(t._id),u({title:t.title,description:t.description})},N=async()=>{try{await S(x,l),r.success("Project updated"),p(null),h()}catch{r.error("Update failed")}},C=async t=>{if(window.confirm("Are you sure you want to delete this project?"))try{await _(t),r.success("Project deleted"),h()}catch{r.error("Delete failed")}},E=async t=>{var s,d;const n=f[t];if(!n){r.error("Please enter an email to add");return}try{await D(t,n),r.success(`Added ${n} to project`),y(m=>({...m,[t]:""})),h()}catch(m){r.error(((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to add member")}},P=async t=>{var s,d;const n=v[t];if(!n){r.error("Please enter an email to remove");return}if(window.confirm(`Remove ${n} from this project?`))try{await A(t,n),r.success(`Removed ${n} from project`),w(m=>({...m,[t]:""})),h()}catch(m){r.error(((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to remove member")}};return e.jsxs("div",{className:"p-4 sm:p-6 max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-purple-300 animate-pulse",children:"🚀 Your Projects"}),c.map((t,n)=>e.jsx("div",{className:"bg-gradient-to-r from-purple-900 to-indigo-900 text-purple-100 rounded-2xl p-4 sm:p-6 mb-6 shadow-lg transform transition duration-300 ease-in-out hover:scale-105 hover:shadow-2xl animate-fade-in",style:{animationDelay:`${n*100}ms`},children:x===t._id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:l.title,onChange:s=>u({...l,title:s.target.value}),className:"bg-purple-700 text-white border-none px-4 py-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-purple-400"}),e.jsx("textarea",{value:l.description,onChange:s=>u({...l,description:s.target.value}),className:"bg-purple-700 text-white border-none px-4 py-2 w-full rounded focus:outline-none focus:ring-2 focus:ring-purple-400"}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[e.jsx("button",{onClick:N,className:"bg-green-500 hover:bg-green-600 transition px-3 py-1.5 text-sm sm:text-base rounded-xl text-white font-semibold shadow hover:shadow-md",children:"💾 Save"}),e.jsx("button",{onClick:()=>p(null),className:"bg-gray-600 hover:bg-gray-700 transition px-3 py-1.5 text-sm sm:text-base rounded-xl text-white font-semibold shadow hover:shadow-md",children:"❌ Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-purple-200 mb-4",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-4 mb-4",children:[e.jsx("button",{onClick:()=>j(t),className:"bg-blue-600 hover:bg-blue-700 transition px-3 py-1.5 text-sm sm:text-base rounded-xl text-white font-semibold shadow hover:shadow-md",children:"✏️ Edit"}),e.jsx("button",{onClick:()=>C(t._id),className:"bg-red-600 hover:bg-red-700 transition px-3 py-1.5 text-sm sm:text-base rounded-xl text-white font-semibold shadow hover:shadow-md",children:"🗑 Delete"}),e.jsx("button",{onClick:()=>i(b===t._id?null:t._id),className:"bg-green-600 hover:bg-green-700 transition px-3 py-1.5 text-sm sm:text-base rounded-xl text-white font-semibold shadow hover:shadow-md",children:"👥 Members"})]}),b===t._id&&e.jsxs(e.Fragment,{children:[t.teamMembers&&t.teamMembers.length>0?e.jsx("ul",{className:"list-disc list-inside text-purple-300 text-sm mb-4",children:t.teamMembers.map(s=>e.jsxs("li",{children:[s.name," (",s.email,")"]},s._id))}):e.jsx("p",{className:"text-purple-300 text-sm mb-4 italic",children:"No members added yet."}),e.jsxs("div",{className:"mb-4 flex flex-col gap-4 max-w-md",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("input",{type:"email",value:f[t._id]||"",onChange:s=>y(d=>({...d,[t._id]:s.target.value})),placeholder:"Enter email to add",className:"flex-1 px-3 py-2 rounded bg-purple-700 text-white border-none focus:outline-none focus:ring-2 focus:ring-purple-400"}),e.jsx("button",{onClick:()=>E(t._id),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 text-sm sm:text-base rounded font-semibold",children:"Add Member"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("input",{type:"email",value:v[t._id]||"",onChange:s=>w(d=>({...d,[t._id]:s.target.value})),placeholder:"Enter email to remove",className:"flex-1 px-3 py-2 rounded bg-purple-700 text-white border-none focus:outline-none focus:ring-2 focus:ring-purple-400"}),e.jsx("button",{onClick:()=>P(t._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 text-sm sm:text-base rounded font-semibold",children:"Remove Member"})]})]})]})]})},t._id))]})},T=({onClose:o})=>{const[c,g]=a.useState(""),[x,p]=a.useState(""),[l,u]=a.useState(!1),b=async i=>{if(i.preventDefault(),!c.trim()){r.error("Title is required");return}u(!0);try{await F({title:c,description:x}),r.success("Project created successfully"),o(),window.location.reload()}catch{r.error("Failed to create project")}u(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",onClick:o,children:e.jsxs("div",{className:`bg-gray-900 text-gray-200 rounded-lg p-6 w-full max-w-md shadow-lg\r
                   transform transition-transform duration-300 ease-in-out\r
                   hover:scale-[1.02]`,onClick:i=>i.stopPropagation(),children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6 border-b border-gray-700 pb-2",children:"Add New Project"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block font-semibold mb-1",htmlFor:"title",children:"Title"}),e.jsx("input",{id:"title",type:"text",value:c,onChange:i=>g(i.target.value),className:`w-full bg-gray-800 border border-gray-700 rounded px-3 py-2\r
                         focus:outline-none focus:ring-2 focus:ring-purple-500\r
                         placeholder-gray-400 text-gray-100 transition duration-200`,placeholder:"Enter project title",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block font-semibold mb-1",htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:x,onChange:i=>p(i.target.value),className:`w-full bg-gray-800 border border-gray-700 rounded px-3 py-2\r
                         focus:outline-none focus:ring-2 focus:ring-purple-500\r
                         placeholder-gray-400 text-gray-100 transition duration-200`,rows:4,placeholder:"Enter project description"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:o,className:`px-5 py-2 border border-gray-600 rounded\r
                         hover:bg-gray-700 hover:border-purple-500 transition\r
                         duration-200 disabled:opacity-50`,disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",className:`px-5 py-2 bg-purple-600 text-gray-100 rounded\r
                         hover:bg-purple-700 transition duration-200 disabled:opacity-50`,disabled:l,children:l?"Creating...":"Create"})]})]})]})})},q=()=>{const[o,c]=a.useState(!1);return e.jsxs("div",{className:"p-6 min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-black text-purple-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-purple-700 pb-4",children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight text-purple-300 animate-fade-in",children:"🚀 Project Dashboard"}),e.jsx("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-blue-600 to-purple-700 hover:from-blue-700 hover:to-purple-800 transition-all text-white font-bold px-6 py-2 rounded-xl shadow-md hover:shadow-xl transform hover:scale-105 duration-300",children:"➕ Add Project"})]}),e.jsx(R,{}),o&&e.jsx("div",{className:"animate-fade-in",children:e.jsx(T,{onClose:()=>c(!1)})})]})};export{q as default};
